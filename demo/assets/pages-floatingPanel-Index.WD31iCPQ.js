import{d as a,r as e,q as t,v as s,Q as l,E as o,o as n,c as u,w as r,e as d,n as c,x as i,T as h,y as v,i as m,a4 as g,B as f,a as p,b as _,g as w,F as b,h as x,f as T,t as j,u as y}from"./index--UwMP9LN.js";import{f as I,m as $,K as B,l as M,ad as A,v as C,h as H,o as S,ae as D,b as V,c as F,d as K,_ as P,a as U}from"./page-wraper.CWk-n8Ds.js";import{_ as Y}from"./wd-cell-group.B5-guSgA.js";import{u as k}from"./useTouch.azZ66Ws3.js";import{_ as z,a as E}from"./wd-tabs.COjuVB7Z.js";import"./useChildren.B_Q15oAU.js";import"./wd-sticky-box.DM0KXEA4.js";import"./wd-resize.DTr-RrJm.js";import"./useTranslate.DB6DQ0QV.js";const G=V(a({name:"wd-floating-panel",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...I,height:$(0),anchors:B(),safeAreaInsetBottom:M(!1),showScrollbar:A,duration:C(300),contentDraggable:A},emits:["update:height","height-change"],setup(a,{emit:f}){const p=k(),_=a,w=f;let b;const x=e(_.height),T=e(0),j=e(!1),y=t((()=>({min:_.anchors[0]?_.anchors[0]:100,max:_.anchors[_.anchors.length-1]?_.anchors[_.anchors.length-1]:Math.round(.6*T.value)}))),I=t((()=>_.anchors.length>=2?_.anchors:[y.value.min,y.value.max])),$=t((()=>{const a={height:H(y.value.max),transform:`translateY(calc(100% + ${H(-x.value)}))`,transition:j.value?"none":`transform ${_.duration}ms cubic-bezier(0.18, 0.89, 0.32, 1.28)`};return`${S(a)};${_.customStyle}`})),B=a=>{p.touchStart(a),j.value=!0,b=-x.value},M=a=>{if("content"==a.currentTarget.dataset.id&&!_.contentDraggable)return;p.touchMove(a);const e=p.deltaY.value+b;x.value=-C(e)},A=()=>{j.value=!1,x.value=D(I.value,x.value),x.value!==-b&&w("height-change",{height:x.value})},C=a=>{const e=Math.abs(a),{min:t,max:s}=y.value;return e>s?-(s+.2*(e-s)):e<t?-(t-.2*(t-e)):a};return s((()=>x.value),(a=>{w("update:height",a)})),s(y,(()=>{x.value=D(I.value,x.value)}),{immediate:!0}),l((()=>{const{windowHeight:a}=o();T.value=a})),(a,e)=>{const t=m,s=g;return n(),u(t,{class:c(`wd-floating-panel ${a.customClass} ${a.safeAreaInsetBottom?"is-safe":""}`),style:v($.value),onTouchstartPassive:B,onTouchmovePassive:M,onTouchend:A,onTouchcancel:A},{default:r((()=>[d(t,{class:c("wd-floating-panel__header")},{default:r((()=>[d(t,{class:c("wd-floating-panel__header-bar")})])),_:1}),d(s,{class:c("wd-floating-panel__content"),"data-id":"content","show-scrollbar":a.showScrollbar,"scroll-y":"",onTouchmove:h(M,["stop","prevent"])},{default:r((()=>[i(a.$slots,"default",{},void 0,!0)])),_:3},8,["show-scrollbar"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-379c9360"]]),J=V(a({__name:"Index",setup(a){const{show:t}=F(),s=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],l=e(0),u=e(0),c=e(0),i=e([]),h=({height:a})=>{t(H(a))};return f((()=>{c.value=o().windowHeight,i.value=[100,Math.round(.4*c.value),Math.round(.7*c.value)],u.value=i.value[1]})),(a,e)=>{const t=p(_("wd-toast"),K),o=p(_("wd-cell"),P),c=p(_("wd-cell-group"),Y),v=p(_("wd-floating-panel"),G),g=p(_("wd-tab"),z),f=m,I=p(_("wd-tabs"),E),$=p(_("page-wraper"),U);return n(),w(b,null,[d(t),d(f,{class:"floating-panel"},{default:r((()=>[d($,null,{default:r((()=>[d(I,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a)},{default:r((()=>[d(g,{title:"基础用法"},{default:r((()=>[d(v,{safeAreaInsetBottom:""},{default:r((()=>[d(c,{border:""},{default:r((()=>[(n(),w(b,null,x(s,(a=>d(o,{key:a,title:a},null,8,["title"]))),64))])),_:1})])),_:1})])),_:1}),d(g,{title:"自定义锚点"},{default:r((()=>[d(v,{height:u.value,"onUpdate:height":e[0]||(e[0]=a=>u.value=a),anchors:i.value,safeAreaInsetBottom:"",onHeightChange:h},{default:r((()=>[d(f,{class:"inner-content"},{default:r((()=>[T("自定义锚点 "+j(i.value.map(y(H)))+" - "+j(y(H)(u.value.toFixed(0))),1)])),_:1})])),_:1},8,["height","anchors"])])),_:1}),d(g,{title:"仅头部拖拽"},{default:r((()=>[d(v,{contentDraggable:!1},{default:r((()=>[d(f,{class:"inner-content"},{default:r((()=>[T("内容区不可以拖拽")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-29c5d28e"]]);export{J as default};
