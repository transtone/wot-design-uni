import{d as a,r as e,q as s,v as t,o as l,c as n,w as i,y as o,x as d,p as c,n as u,i as r,J as m,V as b,m as _,a7 as p,e as v,g as f,h as w,F as y,f as h,t as x,u as g,a4 as I}from"./index--UwMP9LN.js";import{f as k,v as $,m as C,l as N,D as S,i as T,g as V,t as L,I as j,V as H,b as X,Q as q,w as z,o as G,H as M,q as W,h as A}from"./page-wraper.CWk-n8Ds.js";import{w as D,a as E}from"./wd-sticky-box.DM0KXEA4.js";import{u as F}from"./useTouch.azZ66Ws3.js";import{u as J}from"./useChildren.B_Q15oAU.js";import{u as K}from"./useTranslate.DB6DQ0QV.js";const P=Symbol("wd-tabs"),Q={...k,modelValue:$(0),slidableNum:C(6),mapNum:C(10),sticky:N(!1),offsetTop:C(0),swipeable:N(!1),lineWidth:S,lineHeight:S,color:T(""),inactiveColor:T(""),animated:N(!1),duration:C(300)},R=X(a({name:"wd-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...k,name:S,title:String,disabled:N(!1)},setup(a,{expose:b}){const _=a,p=e(!1),v=e(!1),{proxy:f}=m(),{parent:w,index:y}=V(P),h=s((()=>L(w)?w.state.activeIndex:0));function x(a,e){p.value=a,v.value=e}return t((()=>_.name),(a=>{!L(a)||j(a)||H(a)?w&&function(a){const{name:e}=_;if(null==e||""===e)return;w&&w.children.forEach((s=>{s.$.uid!==a.$.uid&&s.name===e&&console.error(`The tab's bound value: ${e} has been used`)}))}(f):console.error("[wot design] error(wd-tab): the type of name should be number or string")}),{deep:!0,immediate:!0}),t((()=>h.value),(a=>{a===y.value?x(!0,!0):x(p.value,!1)}),{deep:!0,immediate:!0}),b({setShow:x,painted:p}),(a,e)=>{const s=r;return l(),n(s,{class:u(`wd-tab ${a.customClass}`),style:o(a.customStyle)},{default:i((()=>[p.value?(l(),n(s,{key:0,class:"wd-tab__body",style:o(v.value?"":"display: none;")},{default:i((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["style"])):c("",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-799df3ee"]]),B=X(a({name:"wd-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:Q,emits:["change","disabled","click","update:modelValue"],setup(a,{expose:e,emit:k}){const $=".wd-tabs__nav-item",C=".wd-tabs__nav-container",N=a,S=k,{translate:T}=K("tabs"),V=b({activeIndex:0,lineStyle:"display:none;",inited:!1,animating:!1,mapShow:!1,scrollLeft:0}),{children:X,linkChildren:Q}=J(P);Q({state:V});const{proxy:R}=m(),B=F(),O=s((()=>X.map(((a,e)=>({disabled:a.disabled,title:a.title,name:L(a.name)?a.name:e}))))),U=s((()=>N.animated?G({left:-100*V.activeIndex+"%","transition-duration":N.duration+"ms","-webkit-transition-duration":N.duration+"ms"}):"")),Y=q((function(a=0,e=!1,s=!0){0!==O.value.length&&(a=ia(a),O.value[a].disabled||(V.activeIndex=a,s&&(aa(!1===e),ea()),function(){if(!V.inited)return;O.value[V.activeIndex].name!==N.modelValue&&(S("change",{index:V.activeIndex,name:O.value[V.activeIndex].name}),S("update:modelValue",O.value[V.activeIndex].name))}()))}),100,{leading:!1});function Z(){V.mapShow?(V.animating=!1,setTimeout((()=>{V.mapShow=!1}),300)):(V.mapShow=!0,setTimeout((()=>{V.animating=!0}),100))}function aa(a=!0){if(!V.inited)return;const{lineWidth:e,lineHeight:s}=N;M($,!0,R).then((t=>{const l={};L(e)&&(l.width=A(e)),L(s)&&(l.height=A(s),l.borderRadius=`calc(${A(s)} / 2)`);const n=t[V.activeIndex];let i=t.slice(0,V.activeIndex).reduce(((a,e)=>a+Number(e.width)),0)+Number(n.width)/2;l.transform=`translateX(${i}px) translateX(-50%)`,a&&(l.transition="width 300ms ease, transform 300ms ease"),V.lineStyle=G(l)}))}function ea(){V.inited&&Promise.all([M($,!0,R),M(C,!1,R)]).then((([a,e])=>{const s=a[V.activeIndex],t=a.slice(0,V.activeIndex).reduce(((a,e)=>a+e.width),0)-(e.width-Number(s.width))/2;t===V.scrollLeft?V.scrollLeft=t+Math.random()/1e4:V.scrollLeft=t}))}function sa(a){if(void 0===a)return;const{name:e,disabled:s}=O.value[a];s?S("disabled",{index:a,name:e}):(V.mapShow&&Z(),Y(a),S("click",{index:a,name:e}))}function ta(a){N.swipeable&&B.touchStart(a)}function la(a){N.swipeable&&B.touchMove(a)}function na(){if(!N.swipeable)return;const{direction:a,deltaX:e,offsetX:s}=B;"horizontal"===a.value&&s.value>=50&&(e.value>0&&0!==V.activeIndex?Y(V.activeIndex-1):e.value<0&&V.activeIndex!==O.value.length-1&&(Y(V.activeIndex+1),Y(V.activeIndex+1)))}function ia(a){if(j(a)&&a>=O.value.length&&(console.error("[wot design] warning(wd-tabs): the type of tabs' value is Number shouldn't be less than its children"),a=0),H(a)){const e=O.value.findIndex((e=>e.name===a));a=-1===e?0:e}return a}return t((()=>N.modelValue),(a=>{j(a)||H(a)||console.error("[wot design] error(wd-tabs): the type of value should be number or string"),""!==a&&L(a)||console.error("[wot design] error(wd-tabs): tabs's value cannot be '' null or undefined"),"number"==typeof a&&a<0&&console.error("[wot design] error(wd-tabs): tabs's value cannot be less than zero")}),{immediate:!0,deep:!0}),t((()=>N.modelValue),(a=>{const e=ia(a);Y(a,!1,e!==V.activeIndex)}),{immediate:!1,deep:!0}),t((()=>X.length),(()=>{V.inited&&p((()=>{Y(N.modelValue)}))})),t((()=>N.slidableNum),(a=>{W(a,"slidableNum")})),t((()=>N.mapNum),(a=>{W(a,"mapNum")})),_((()=>{V.inited=!0,p((()=>{Y(N.modelValue,!0)}))})),e({setActive:Y,scrollIntoView:ea,updateLineStyle:aa}),(a,e)=>{const s=r,t=I;return a.sticky?(l(),n(E,{key:0},{default:i((()=>[v(s,{class:u(`wd-tabs ${a.customClass} ${a.slidableNum<O.value.length?"is-slide":""} ${a.mapNum<O.value.length&&0!==a.mapNum?"is-map":""}`),style:o(a.customStyle)},{default:i((()=>[v(D,{"offset-top":a.offsetTop},{default:i((()=>[v(s,{class:"wd-tabs__nav wd-tabs__nav--sticky"},{default:i((()=>[v(s,{class:"wd-tabs__nav--wrap"},{default:i((()=>[v(t,{"scroll-x":a.slidableNum<O.value.length,"scroll-with-animation":"","scroll-left":V.scrollLeft},{default:i((()=>[v(s,{class:"wd-tabs__nav-container"},{default:i((()=>[(l(!0),f(y,null,w(O.value,((e,t)=>(l(),n(s,{onClick:a=>sa(t),key:t,class:u(`wd-tabs__nav-item  ${V.activeIndex===t?"is-active":""} ${e.disabled?"is-disabled":""}`),style:o(V.activeIndex===t?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[h(x(e.title),1)])),_:2},1032,["onClick","class","style"])))),128)),v(s,{class:"wd-tabs__line",style:o(V.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<O.value.length&&0!==a.mapNum?(l(),n(s,{key:0,class:"wd-tabs__map"},{default:i((()=>[v(s,{class:u("wd-tabs__map-btn  "+(V.animating?"is-open":"")),onClick:Z},{default:i((()=>[v(s,{class:u("wd-tabs__map-arrow  "+(V.animating?"is-open":""))},{default:i((()=>[v(z,{name:"arrow-down"})])),_:1},8,["class"])])),_:1},8,["class"]),v(s,{class:"wd-tabs__map-header",style:o(`${V.mapShow?"":"display:none;"}  ${V.animating?"opacity:1;":""}`)},{default:i((()=>[h(x(g(T)("all")),1)])),_:1},8,["style"]),v(s,{class:u("wd-tabs__map-body  "+(V.animating?"is-open":"")),style:o(V.mapShow?"":"display:none")},{default:i((()=>[(l(!0),f(y,null,w(O.value,((e,t)=>(l(),n(s,{class:"wd-tabs__map-nav-item",key:t,onClick:a=>sa(t)},{default:i((()=>[v(s,{class:u(`wd-tabs__map-nav-btn ${V.activeIndex===t?"is-active":""}  ${e.disabled?"is-disabled":""}`),style:o(V.activeIndex===t?a.color?"color:"+a.color+";border-color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[h(x(e.title),1)])),_:2},1032,["class","style"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):c("",!0)])),_:1})])),_:1},8,["offset-top"]),v(s,{class:"wd-tabs__container",onTouchstart:ta,onTouchmove:la,onTouchend:na,onTouchcancel:na},{default:i((()=>[v(s,{class:u(["wd-tabs__body",a.animated?"is-animated":""]),style:o(U.value)},{default:i((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),v(s,{class:"wd-tabs__mask",style:o(`${V.mapShow?"":"display:none;"} ${V.animating?"opacity:1;":""}`),onClick:Z},null,8,["style"])])),_:3},8,["class","style"])])),_:3})):(l(),n(s,{key:1,class:u(`wd-tabs  ${a.customClass} ${a.slidableNum<O.value.length?"is-slide":""} ${a.mapNum<O.value.length&&0!==a.mapNum?"is-map":""}`)},{default:i((()=>[v(s,{class:"wd-tabs__nav"},{default:i((()=>[v(s,{class:"wd-tabs__nav--wrap"},{default:i((()=>[v(t,{"scroll-x":a.slidableNum<O.value.length,"scroll-with-animation":"","scroll-left":V.scrollLeft},{default:i((()=>[v(s,{class:"wd-tabs__nav-container"},{default:i((()=>[(l(!0),f(y,null,w(O.value,((e,t)=>(l(),n(s,{onClick:a=>sa(t),key:t,class:u(`wd-tabs__nav-item ${V.activeIndex===t?"is-active":""} ${e.disabled?"is-disabled":""}`),style:o(V.activeIndex===t?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[h(x(e.title),1)])),_:2},1032,["onClick","class","style"])))),128)),v(s,{class:"wd-tabs__line",style:o(V.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<O.value.length&&0!==a.mapNum?(l(),n(s,{key:0,class:"wd-tabs__map"},{default:i((()=>[v(s,{class:"wd-tabs__map-btn",onClick:Z},{default:i((()=>[v(s,{class:u("wd-tabs__map-arrow "+(V.animating?"is-open":""))},{default:i((()=>[v(z,{name:"arrow-down"})])),_:1},8,["class"])])),_:1}),v(s,{class:"wd-tabs__map-header",style:o(`${V.mapShow?"":"display:none;"}  ${V.animating?"opacity:1;":""}`)},{default:i((()=>[h(x(g(T)("all")),1)])),_:1},8,["style"]),v(s,{class:u("wd-tabs__map-body "+(V.animating?"is-open":"")),style:o(V.mapShow?"":"display:none")},{default:i((()=>[(l(!0),f(y,null,w(O.value,((a,e)=>(l(),n(s,{class:"wd-tabs__map-nav-item",key:e,onClick:a=>sa(e)},{default:i((()=>[v(s,{class:u(`wd-tabs__map-nav-btn ${V.activeIndex===e?"is-active":""}  ${a.disabled?"is-disabled":""}`)},{default:i((()=>[h(x(a.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):c("",!0)])),_:1}),v(s,{class:"wd-tabs__container",onTouchstart:ta,onTouchmove:la,onTouchend:na,onTouchcancel:na},{default:i((()=>[v(s,{class:u(["wd-tabs__body",a.animated?"is-animated":""]),style:o(U.value)},{default:i((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),v(s,{class:"wd-tabs__mask",style:o(`${V.mapShow?"":"display:none;"}  ${V.animating?"opacity:1":""}`),onClick:Z},null,8,["style"])])),_:3},8,["class"]))}}}),[["__scopeId","data-v-f4f32bd7"]]);export{R as _,B as a};
