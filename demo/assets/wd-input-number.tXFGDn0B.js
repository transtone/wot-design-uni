import{d as e,r as a,v as t,o as s,c as i,w as u,e as n,n as l,T as o,y as d,p as r,i as c,Y as p}from"./index--UwMP9LN.js";import{f as m,x as b,D as v,m as f,l as w,v as _,i as h,w as N,P as x,t as y,Q as M,b as I}from"./page-wraper.CWk-n8Ds.js";const V=I(e({name:"wd-input-number",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...m,modelValue:b(v),min:f(1),max:f(Number.MAX_SAFE_INTEGER),step:f(1),stepStrictly:w(!1),precision:f(0),disabled:w(!1),disableInput:w(!1),disableMinus:w(!1),disablePlus:w(!1),withoutInput:w(!1),inputWidth:_(36),allowNull:w(!1),placeholder:h(""),adjustPosition:w(!0)},emits:["focus","blur","change","update:modelValue"],setup(e,{emit:m}){const b=e,v=m,f=a(!1),w=a(!1),_=a("");function h(e){const{disabled:a,min:t,max:s,step:i}=b;f.value=a||Number(e)<=t||j(e,-i)<t,w.value=a||Number(e)>=s||j(e,i)>s}function I(e){return Number(parseFloat(""+Math.round(e*Math.pow(10,b.precision))/Math.pow(10,b.precision)).toFixed(b.precision))}function V(e){const a=function(e){if(void 0===e)return 0;const a=e.toString(),t=a.indexOf(".");let s=0;return-1!==t&&(s=a.length-t-1),s}(b.step),t=Math.pow(10,a);return Math.round(Number(e)/b.step)*t*b.step/t}function g(e,a=!0){!b.allowNull||y(e)&&""!==e?(b.stepStrictly&&(e=V(e)),!e&&0!==e||void 0===b.precision||(e=I(Number(e))),Number(e)>b.max&&(e=I(b.max)),Number(e)<b.min&&(e=I(b.min)),E(e,a)):E(e,a)}function j(e,a){if(e=Number(e),isNaN(e))return b.min;const t=Math.pow(10,b.precision);return I((e*t+a*t)/t)}function P(){if(f.value||b.disableMinus)return;E(j(_.value,-b.step))}function S(){if(w.value||b.disablePlus)return;E(j(_.value,b.step))}function C(e){E(e.detail.value||"")}function F(e){v("focus",e.detail)}function k(){const e=W(_.value);x(_.value,e)||g(e),v("blur",{value:e})}function E(e,a=!0){x(_.value,e)||(_.value=e,a&&v("update:modelValue",_.value),a&&v("change",{value:e}))}function W(e){if(b.allowNull&&(!y(e)||""===e))return"";let a=Number(e);return isNaN(a)&&(e=b.min),b.stepStrictly&&(a=V(e)),void 0!==b.precision&&(a=Number(a.toFixed(b.precision))),a>b.max&&(a=b.max),a<b.min&&(a=b.min),a}return t((()=>b.modelValue),(e=>{_.value=e,h(e)}),{immediate:!0,deep:!0}),t([()=>b.max,()=>b.min],(()=>{M((()=>{const e=W(_.value);x(_.value,e)||g(e),h(e)}),30)()}),{immediate:!0,deep:!0}),t((()=>b.disabled),(e=>{f.value=e,w.value=e}),{immediate:!0,deep:!0}),(e,a)=>{const t=c,m=p;return s(),i(t,{class:l(`wd-input-number ${e.customClass} ${e.disabled?"is-disabled":""} ${e.withoutInput?"is-without-input":""}`),style:d(e.customStyle)},{default:u((()=>[n(t,{class:l("wd-input-number__action "+(f.value||e.disableMinus?"is-disabled":"")),onClick:P},{default:u((()=>[n(N,{name:"decrease","custom-class":"wd-input-number__action-icon"})])),_:1},8,["class"]),e.withoutInput?r("",!0):(s(),i(t,{key:0,class:"wd-input-number__inner",onClick:a[1]||(a[1]=o((()=>{}),["stop"]))},{default:u((()=>[n(m,{class:"wd-input-number__input",style:d(""+(e.inputWidth?"width: "+e.inputWidth:"")),type:"digit",disabled:e.disabled||e.disableInput,modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value=e),placeholder:e.placeholder,"adjust-position":e.adjustPosition,onInput:C,onFocus:F,onBlur:k},null,8,["style","disabled","modelValue","placeholder","adjust-position"]),n(t,{class:"wd-input-number__input-border"})])),_:1})),n(t,{class:l("wd-input-number__action "+(w.value||e.disablePlus?"is-disabled":"")),onClick:S},{default:u((()=>[n(N,{name:"add","custom-class":"wd-input-number__action-icon"})])),_:1},8,["class"])])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-583a1d9b"]]);export{V as _};
