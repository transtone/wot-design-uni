import{f as a,x as e,l as s,i as t,z as l,s as o,H as i,h as n,o as d,b as u,d as r,a as p}from"./page-wraper.CWk-n8Ds.js";import{d as v,V as c,q as m,v as f,m as _,o as b,c as g,w as y,g as h,h as w,F as x,e as I,n as k,y as j,i as z,u as S,x as $,f as C,t as U,ao as q,J as H,r as N,a as A,b as F,l as G}from"./index--UwMP9LN.js";import{_ as J}from"./demo-block.KFMst2gM.js";const T=u(v({name:"wd-segmented",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...a,value:e([String,Number]),disabled:s(!1),size:t("middle"),options:{type:Array,required:!0,default:()=>[]},vibrateShort:s(!1)},emits:["update:value","change","click"],setup(a,{emit:e}){const s=".wd-segmented__item",t=a,u=e,r=c({activeIndex:0,activeStyle:""}),p=m((()=>t.disabled||!(!t.options[0]||!o(t.options[0]))&&t.options[0].disabled));f((()=>t.value),(()=>{A(),N(),t.vibrateShort&&q({})}),{immediate:!1});const{proxy:v}=H();function N(a=!0){i(s,!0,v).then((e=>{const s=e[r.activeIndex],t={position:"absolute",width:n(s.width),"z-index":0},l=e.slice(0,r.activeIndex).reduce(((a,e)=>a+Number(e.width)),0);l&&(t.transform=`translateX(${l}px)`),a&&(t.transition="all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1)"),r.activeStyle=d(t)}))}function A(){const a=t.options.findIndex((a=>(o(a)?a.value:a)==t.value));if(a>=0)r.activeIndex=a;else{const a=o(t.options[0])?t.options[0].value:t.options[0];u("update:value",a),u("change",o(t.options[0])?t.options[0]:{value:a})}}return _((()=>{A(),l((()=>{N(!1)}))})),(a,e)=>{const s=z;return b(),g(s,{class:k(`wd-segmented ${a.customClass}`),style:j(a.customStyle)},{default:y((()=>[(b(!0),h(x,null,w(a.options,((e,l)=>(b(),g(s,{class:k(`wd-segmented__item is-${a.size} ${r.activeIndex===l?"is-active":""} ${a.disabled||S(o)(e)&&e.disabled?"is-disabled":""}`),onClick:a=>function(a,e){if(t.disabled||o(a)&&a.disabled)return;const s=o(a)?a.value:a;r.activeIndex=e,N(),u("update:value",s),u("change",o(a)?a:{value:s}),u("click",o(a)?a:{value:s})}(e,l),key:l},{default:y((()=>[I(s,{class:"wd-segmented__item-label"},{default:y((()=>[a.$slots.label?$(a.$slots,"label",{key:0,option:S(o)(e)?e:{value:e}},void 0,!0):(b(),h(x,{key:1},[C(U(S(o)(e)?e.value:e),1)],64))])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),I(s,{class:k("wd-segmented__item--active "+(p.value?"is-disabled":"")),style:j(r.activeStyle)},null,8,["class","style"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-5fe3a9ff"]]),V=u(v({__name:"Index",setup(a){const e=N(["评论","点赞","贡献","打赏"]),s=N([{value:"李雷",disabled:!1,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/redpanda.jpg"}},{value:"韩梅梅",disabled:!1,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/capybara.jpg"}},{value:"林涛",disabled:!0,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/panda.jpg"}},{value:"Tom",disabled:!1,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/meng.jpg"}}]),t=N("简介"),l=N("详情"),o=N("评论"),i=N("打赏"),n=N("韩梅梅"),d=N("评论");function u(a){console.log(a)}return(a,v)=>{const c=A(F("wd-toast"),r),m=A(F("wd-segmented"),T),f=z,_=A(F("demo-block"),J),h=G,w=A(F("page-wraper"),p);return b(),g(f,null,{default:y((()=>[I(c),I(w,null,{default:y((()=>[I(_,{title:"大型分段器",transparent:""},{default:y((()=>[I(f,{class:"section"},{default:y((()=>[I(m,{options:e.value,value:t.value,"onUpdate:value":v[0]||(v[0]=a=>t.value=a),size:"large",onChange:u},null,8,["options","value"])])),_:1})])),_:1}),I(_,{title:"默认分段器",transparent:""},{default:y((()=>[I(f,{class:"section"},{default:y((()=>[I(m,{options:e.value,value:l.value,"onUpdate:value":v[1]||(v[1]=a=>l.value=a)},null,8,["options","value"])])),_:1})])),_:1}),I(_,{title:"小型分段器",transparent:""},{default:y((()=>[I(f,{class:"section"},{default:y((()=>[I(m,{options:e.value,value:o.value,"onUpdate:value":v[2]||(v[2]=a=>o.value=a),size:"small"},null,8,["options","value"])])),_:1})])),_:1}),I(_,{title:"带振动效果的分段器",transparent:""},{default:y((()=>[I(f,{class:"section"},{default:y((()=>[I(m,{options:e.value,value:i.value,"onUpdate:value":v[3]||(v[3]=a=>i.value=a),"vibrate-short":!0},null,8,["options","value"])])),_:1})])),_:1}),I(_,{title:"禁用分段器",transparent:""},{default:y((()=>[I(f,{class:"section"},{default:y((()=>[I(m,{options:e.value,value:d.value,"onUpdate:value":v[4]||(v[4]=a=>d.value=a),disabled:""},null,8,["options","value"])])),_:1})])),_:1}),I(_,{title:"自定义渲染分段器标签",transparent:""},{default:y((()=>[I(f,{class:"section"},{default:y((()=>[I(m,{options:s.value,value:n.value,"onUpdate:value":v[5]||(v[5]=a=>n.value=a),"vibrate-short":!0,onChange:u},{label:y((({option:a})=>[I(f,{class:"section-slot"},{default:y((()=>[I(h,{style:{"border-radius":"50%",width:"32px",height:"32px"},src:a.payload.avatar},null,8,["src"]),I(f,{class:"name"},{default:y((()=>[C(U(a.value),1)])),_:2},1024)])),_:2},1024)])),_:1},8,["options","value"])])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-1ca24240"]]);export{V as default};
