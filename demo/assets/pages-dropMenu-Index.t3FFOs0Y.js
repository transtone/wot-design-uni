import{u as e,_ as l}from"./wd-message-box.Ccykp07D.js";import{d as o,N as a,r as t,q as n,v as u,Q as s,S as d,o as i,c as r,w as p,e as c,g as m,h as v,F as f,x as _,n as g,y as b,p as w,J as y,i as V,f as h,t as x,j as k,E as C,a as $,b as K,u as j,T as z}from"./index--UwMP9LN.js";import{f as T,m as U,i as I,l as S,K as N,g as M,k as O,C as B,w as F,t as Q,b as G,G as H,H as E,_ as P,a as q}from"./page-wraper.CWk-n8Ds.js";import{p as A,r as L,q as D,c as J,u as R}from"./clickoutside.CWMpMR_B.js";import{u as W}from"./useChildren.B_Q15oAU.js";import{_ as X}from"./demo-block.KFMst2gM.js";import{_ as Y}from"./wd-slider.DBrgIsLJ.js";import{_ as Z}from"./wd-button.D3kRr9dh.js";import{w as ee}from"./wd-sort-button.CAGEmv1F.js";import"./wd-input.BswaWSSu.js";import"./useTranslate.DB6DQ0QV.js";import"./useTouch.azZ66Ws3.js";const le=Symbol("wd-drop-menu"),oe={...T,zIndex:U(12),direction:I("down"),modal:S(!0),closeOnClickModal:S(!0),duration:U(200)},ae=G(o({name:"wd-drop-menu-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...T,customTitle:I(""),customIcon:I(""),modelValue:[String,Number],options:N(),disabled:S(!1),iconName:I("check"),title:String,icon:I("arrow-down"),iconSize:I("14px"),beforeToggle:Function,valueKey:I("value"),labelKey:I("label"),tipKey:I("tip")},emits:["change","update:modelValue","open","opened","closed","close"],setup(e,{expose:l,emit:o}){const C=e,$=o,K=a(D,null),j=t(!1),z=t(!1),T=t(),U=t(12),I=t(!0),S=t(!0),N=t(0),{parent:G}=M(le),{proxy:H}=y(),E=n((()=>{let e="";return e=j.value&&G?"down"===G.props.direction?`top: calc(var(--window-top) + ${G.offset.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${G.offset.value}px)`:"",e}));function P(){z.value&&(B(C.beforeToggle)?C.beforeToggle({status:!1,resolve:e=>{e&&q()}}):q())}function q(){z.value&&(z.value=!1)}function J(){z.value||(B(C.beforeToggle)?C.beforeToggle({status:!0,resolve:e=>{e&&R()}}):R())}function R(){j.value=!0,z.value=!0,G&&(I.value=Boolean(G.props.modal),N.value=Number(G.props.duration),S.value=Boolean(G.props.closeOnClickModal),T.value="down"===G.props.direction?"top":"bottom"),$("open")}function W(){j.value=!1,$("closed")}function X(){$("open")}function Y(){$("opened")}function Z(){$("close")}return u((()=>C.modelValue),(e=>{Q(e)&&"number"!=typeof e&&"string"!=typeof e&&console.error("[wot-design] warning(wd-drop-menu-item): the type of value should be a number or a string.")}),{deep:!0,immediate:!0}),s((()=>{K&&K.pushToQueue?K.pushToQueue(H):A(H)})),d((()=>{K&&K.removeFromQueue?K.removeFromQueue(H):L(H)})),l({getShowPop:function(){return z.value},open:J,close:P,toggle:function(){z.value?P():J()}}),(e,l)=>{const o=k,a=V;return j.value?(i(),r(a,{key:0,class:g(`wd-drop-item  ${e.customClass}`),style:b(`z-index: ${U.value}; ${E.value};${e.customStyle}`)},{default:p((()=>[c(O,{modelValue:z.value,"onUpdate:modelValue":l[0]||(l[0]=e=>z.value=e),"z-index":U.value,duration:N.value,position:T.value,"custom-style":"position: absolute; max-height: 80%;","modal-style":"position: absolute;",modal:I.value,"close-on-click-modal":!1,onClickModal:l[1]||(l[1]=e=>S.value&&P()),onBeforeEnter:X,onAfterEnter:Y,onBeforeLeave:Z,onAfterLeave:W},{default:p((()=>[e.options.length?(i(),r(a,{key:0},{default:p((()=>[(i(!0),m(f,null,v(e.options,((l,t)=>(i(),r(a,{key:t,onClick:e=>function(e){if(C.disabled)return;const{valueKey:l}=C,o=C.options[e];$("update:modelValue",""!==o[l]&&void 0!==o[l]?o[l]:o),$("change",{value:""!==o[l]&&void 0!==o[l]?o[l]:o,selectedItem:o}),P()}(t),class:g("wd-drop-item__option "+((""!==l[e.valueKey]?l[e.valueKey]:l)===e.modelValue?"is-active":""))},{default:p((()=>[c(a,{class:g(`wd-drop-item__title ${e.customTitle}`)},{default:p((()=>[c(o,null,{default:p((()=>[h(x(l[e.labelKey]?l[e.labelKey]:l),1)])),_:2},1024),l[e.tipKey]?(i(),r(o,{key:0,class:"wd-drop-item__tip"},{default:p((()=>[h(x(l[e.tipKey]),1)])),_:2},1024)):w("",!0)])),_:2},1032,["class"]),(""!==l[e.valueKey]?l[e.valueKey]:l)===e.modelValue?(i(),r(F,{key:0,name:e.iconName,size:"20px",class:g(`wd-drop-item__icon ${e.customIcon}`)},null,8,["name","class"])):w("",!0)])),_:2},1032,["onClick","class"])))),128))])),_:1})):_(e.$slots,"default",{key:1},void 0,!0)])),_:3},8,["modelValue","z-index","duration","position","modal"])])),_:3},8,["class","style"])):w("",!0)}}}),[["__scopeId","data-v-2135a9fc"]]),te=G(o({name:"wd-drop-menu",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:oe,setup(e){const l=e,o=a(D,null),n=t(`dropMenuId${H()}`),d=t(0),w=t(0),{proxy:k}=y(),{linkChildren:T,children:U}=W(le);function I(e){e.preventDefault(),e.stopPropagation()}function S(e){const{title:l,modelValue:o,options:a,valueKey:t,labelKey:n}=e;if(l)return l;for(let u=0,s=a.length;u<s;u++)if(o===a[u][t])return a[u][n];console.error("[wot-design] warning(wd-drop-menu-item): no value is matched in the options option.")}function N(e){E(`#${n.value}`,!1,k).then((o=>{if(!o)return;const{top:a,bottom:t}=o;"down"===l.direction?d.value=Number(t):d.value=w.value-Number(a),e.$.exposed.toggle()}))}return T({props:l,fold:N,offset:d}),u((()=>l.direction),(e=>{["up","down"].includes(e)||console.error("[wot design] warning(wd-drop-menu): direction must be 'up' or 'down'")}),{deep:!0,immediate:!0}),s((()=>{w.value=C().windowHeight})),(e,l)=>{const a=V,t=$(K("wd-icon"),F);return i(),r(a,{style:b(e.customStyle),class:g(`wd-drop-menu ${e.customClass}`),onClick:z(I,["stop"]),id:n.value},{default:p((()=>[c(a,{class:"wd-drop-menu__list"},{default:p((()=>[(i(!0),m(f,null,v(j(U),((e,l)=>(i(),r(a,{key:l,onClick:l=>function(e){e&&!e.disabled&&(o&&o.closeOther?o.closeOther(e):J(e),N(e))}(e),class:g(`wd-drop-menu__item ${e.disabled?"is-disabled":""} ${e.$.exposed.getShowPop()?"is-active":""}`)},{default:p((()=>[c(a,{class:"wd-drop-menu__item-title"},{default:p((()=>[c(a,{class:"wd-drop-menu__item-title-text"},{default:p((()=>[h(x(S(e)),1)])),_:2},1024),c(t,{name:e.icon,size:e.iconSize,"custom-class":"wd-drop-menu__arrow"},null,8,["name","size"])])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1}),_(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","id"])}}}),[["__scopeId","data-v-d3c8be25"]]),ne=G(o({__name:"Index",setup(o){const{closeOutside:a}=R(),n=e(),u=t(),s=t(),d=t(30);t(!1);const m=t(1),v=t(0),f=t(0),_=t(0),g=t(0),b=t(0),w=t(0),y=t(0),x=t(0),k=t(0),C=t([{label:"全部商品",value:0},{label:"新款商品",value:1,tip:"这是补充信息"},{label:"这是比较长的筛选条件这是比较长的筛选条件",value:2}]),z=t([{label:"综合",value:0},{label:"销量",value:1},{label:"上架时间",value:2}]);function T(){var e;null==(e=s.value)||e.initSlider()}function U({value:e}){console.log(e)}function I({value:e}){console.log(e)}function S({value:e}){console.log(e)}function N({value:e}){console.log(e)}function M({value:e}){console.log(e)}function O({value:e}){console.log(e)}function B({value:e}){console.log(e)}function F({value:e}){console.log(e)}function Q({value:e}){console.log(e)}function G(){u.value.close()}const H=({status:e,resolve:l})=>{n.confirm({title:"异步"+(e?"打开":"关闭"),msg:`确定要${e?"打开":"关闭"}下拉菜单吗？`}).then((()=>{l(!0)})).catch((()=>{l(!1)}))};return(e,o)=>{const t=$(K("wd-message-box"),l),n=$(K("wd-drop-menu-item"),ae),E=$(K("wd-drop-menu"),te),A=$(K("demo-block"),X),L=$(K("wd-slider"),Y),D=$(K("wd-cell"),P),J=$(K("wd-button"),Z),R=V,W=$(K("wd-sort-button"),ee),le=$(K("page-wraper"),q);return i(),r(le,null,{default:p((()=>[c(t),c(R,{class:"demo-body",onClick:j(a)},{default:p((()=>[c(A,{title:"基本用法",transparent:""},{default:p((()=>[c(E,null,{default:p((()=>[c(n,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=e=>m.value=e),options:C.value,onChange:U},null,8,["modelValue","options"]),c(n,{modelValue:v.value,"onUpdate:modelValue":o[1]||(o[1]=e=>v.value=e),options:z.value,onChange:I},null,8,["modelValue","options"])])),_:1})])),_:1}),c(A,{title:"自定义菜单内容",transparent:""},{default:p((()=>[c(E,null,{default:p((()=>[c(n,{modelValue:f.value,"onUpdate:modelValue":o[2]||(o[2]=e=>f.value=e),options:C.value,onChange:S},null,8,["modelValue","options"]),c(n,{ref_key:"dropMenu",ref:u,title:"筛选",onOpened:T},{default:p((()=>[c(R,null,{default:p((()=>[c(L,{modelValue:d.value,"onUpdate:modelValue":o[3]||(o[3]=e=>d.value=e),ref_key:"slider",ref:s},null,8,["modelValue"]),c(D,{title:"标题文字",value:"内容"}),c(D,{title:"标题文字",label:"描述信息",value:"内容"}),c(R,{style:{padding:"0 10px 20px","box-sizing":"border-box"}},{default:p((()=>[c(J,{block:"",size:"large",onClick:G},{default:p((()=>[h("主要按钮")])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1}),c(A,{title:"自定义菜单选项",transparent:""},{default:p((()=>[c(R,{class:"custom-menu"},{default:p((()=>[c(E,{"custom-style":"flex: 1; min-width: 0"},{default:p((()=>[c(n,{modelValue:_.value,"onUpdate:modelValue":o[4]||(o[4]=e=>_.value=e),options:C.value,onChange:N},null,8,["modelValue","options"])])),_:1}),c(R,{style:{flex:"1"}},{default:p((()=>[c(W,{modelValue:g.value,"onUpdate:modelValue":o[5]||(o[5]=e=>g.value=e),title:"上架时间",onChange:M},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),c(A,{title:"自定义菜单图标",transparent:""},{default:p((()=>[c(E,null,{default:p((()=>[c(n,{title:"地图",icon:"location","icon-size":"24px"})])),_:1})])),_:1}),c(A,{title:"异步打开/关闭",transparent:""},{default:p((()=>[c(E,null,{default:p((()=>[c(n,{modelValue:k.value,"onUpdate:modelValue":o[6]||(o[6]=e=>k.value=e),options:C.value,onChange:U,"before-toggle":H},null,8,["modelValue","options"])])),_:1})])),_:1}),c(A,{title:"向上弹出",transparent:""},{default:p((()=>[c(E,{direction:"up"},{default:p((()=>[c(n,{modelValue:b.value,"onUpdate:modelValue":o[7]||(o[7]=e=>b.value=e),options:C.value,onChange:O},null,8,["modelValue","options"]),c(n,{modelValue:w.value,"onUpdate:modelValue":o[8]||(o[8]=e=>w.value=e),options:z.value,onChange:B},null,8,["modelValue","options"])])),_:1})])),_:1}),c(A,{title:"禁用",transparent:""},{default:p((()=>[c(E,{direction:"up"},{default:p((()=>[c(n,{modelValue:y.value,"onUpdate:modelValue":o[9]||(o[9]=e=>y.value=e),disabled:"",options:C.value,onChange:F},null,8,["modelValue","options"]),c(n,{modelValue:x.value,"onUpdate:modelValue":o[10]||(o[10]=e=>x.value=e),options:z.value,onChange:Q},null,8,["modelValue","options"])])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})}}}),[["__scopeId","data-v-668365bb"]]);export{ne as default};
